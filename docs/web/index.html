<!--
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  File:         index.html                                                    ‚îÇ
  ‚îÇ  Author:       Amey Thakur                                                   ‚îÇ
  ‚îÇ  Profile:      https://github.com/Amey-Thakur                                ‚îÇ
  ‚îÇ  Repository:   https://github.com/Amey-Thakur/ADAPTIVE-CRUISE-CONTROL        ‚îÇ
  ‚îÇ                                                                              ‚îÇ
  ‚îÇ  Description:  Root document for the Adaptive Cruise Control (ACC) web       ‚îÇ
  ‚îÇ                simulation. This file defines the complete structural         ‚îÇ
  ‚îÇ                layout of the interactive dashboard, including the loading    ‚îÇ
  ‚îÇ                screen, status bar, road visualization, instrument panels,    ‚îÇ
  ‚îÇ                control interfaces, serial monitor, and footer. All visual    ‚îÇ
  ‚îÇ                styling is handled by style.css; all runtime behavior is      ‚îÇ
  ‚îÇ                driven by simulation.js.                                      ‚îÇ
  ‚îÇ                                                                              ‚îÇ
  ‚îÇ  Technology:   HTML5, CSS3 (external), JavaScript (external)                 ‚îÇ
  ‚îÇ  Fonts:        Google Fonts ‚Äî Play, JetBrains Mono                           ‚îÇ
  ‚îÇ  Released:     September 08, 2023                                            ‚îÇ
  ‚îÇ  License:      MIT                                                           ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
-->
<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#080d1a">
  <title>Adaptive Cruise Control | Amey Thakur</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/svg+xml" href="icon.svg">
  <meta name="description"
    content="Interactive browser-based simulation of an Arduino Uno Adaptive Cruise Control (ACC) system. Explore Normal, Cruise, and Adaptive modes with real-time sensor feedback.">
  <link rel="stylesheet" href="style.css">
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Play:wght@400;700&display=swap"
    rel="stylesheet">
</head>

<body>
  <!-- Loading Screen: Full-viewport overlay displayed during initial page load.
       Contains a CSS-animated car, progress bar, and project branding.
       Removed from the DOM automatically once the simulation engine initializes. -->
  <div id="loader-screen">
    <div class="loader-content">
      <div class="loader-car-track">
        <div class="loader-car">
          <div class="lc-top"></div>
          <div class="lc-body"></div>
          <div class="lc-window lc-w1"></div>
          <div class="lc-window lc-w2"></div>
          <div class="lc-wheel lc-wh-f"></div>
          <div class="lc-wheel lc-wh-r"></div>
          <div class="lc-headlight"></div>
          <div class="lc-taillight"></div>
        </div>
      </div>
      <div class="loader-bar-wrap">
        <div class="loader-bar" id="loader-bar"></div>
      </div>
      <div class="loader-title">Adaptive Cruise Control</div>
    </div>
    <div class="loader-footer">Designed &amp; Developed by <a href="https://github.com/Amey-Thakur" target="_blank"
        style="color: inherit; text-decoration: none;"><strong>Amey Thakur</strong></a></div>
  </div>

  <div id="cinematic-layer"></div>

  <!-- Header Bar: Top navigation containing the project title, active mode badge,
       theme toggle (dark/light), and GitHub repository link. -->
  <header id="header">
    <div class="h-left">
      <span class="h-icon">üöò</span>
      <div>
        <h1>Adaptive Cruise Control</h1>
        <span class="h-sub">Arduino Uno ¬∑ Interactive Simulation</span>
      </div>
    </div>
    <div class="h-center">
      <div class="mode-badge" id="mode-badge" title="Current operating mode of the ACC system">Normal Mode</div>
    </div>
    <div class="h-right">
      <button id="theme-toggle" class="icon-btn" title="Toggle Light/Dark Mode" aria-label="Toggle theme">
        <svg id="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
        <svg id="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </svg>
      </button>
      <a href="https://github.com/Amey-Thakur/ADAPTIVE-CRUISE-CONTROL" class="icon-btn" target="_blank" rel="noopener"
        title="View source code on GitHub">
        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
          <path
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
        </svg>
      </a>
    </div>
  </header>

  <!-- Status Bar: Real-time status indicator displaying the current system state.
       The colored dot reflects Normal (green), Warning (amber), or Danger (red). -->
  <div id="status-bar" title="Real-time system status messages from the ACC controller">
    <span class="status-dot" id="status-dot"></span>
    <span id="status-text">Initializing system ‚Äî Arduino Uno connecting on COM5...</span>
  </div>

  <!-- Main Dashboard: Primary content area containing the road visualization,
       instrument panels, user controls, and serial monitor output. -->
  <main id="main">

    <!-- Road Visualization: Single-lane road with animated lane markers,
         two CSS-rendered vehicles (ACC and Lead), and a distance label overlay.
         Vehicle positions update dynamically based on the HC-SR04 distance value. -->
    <section id="road-section"
      title="Simulated road. The ACC vehicle uses ultrasonic distance sensing to track the lead vehicle ahead.">
      <div id="road">
        <div class="road-edge top"></div>
        <div class="lane-markers">
          <div class="lane-strip" id="lane-strip"></div>
        </div>
        <div class="road-edge bottom"></div>

        <!-- Lead Vehicle: The vehicle ahead. Its horizontal position is determined
             by the ultrasonic distance reading. Tail lights activate on proximity. -->
        <div id="lead-car" class="car" title="Lead Vehicle">
          <div class="car-body lead">
            <div class="car-top"></div>
            <div class="car-window"></div>
            <div class="headlight l"></div>
            <div class="headlight r"></div>
            <div class="tail-light l"></div>
            <div class="tail-light r"></div>
            <div class="car-wheel front"></div>
            <div class="car-wheel rear"></div>
          </div>
          <span class="car-tag">Lead Vehicle</span>
        </div>

        <!-- ACC Vehicle (Ego): The controlled vehicle running the ACC algorithm.
             Headlights follow D13 state; tail lights follow D12 (brake) state.
             Includes a sensor cone overlay that appears during Adaptive Mode. -->
        <div id="ego-car" class="car" title="ACC Vehicle ¬∑ Click to Horn üîä">
          <div class="car-body ego">
            <div class="car-top"></div>
            <div class="car-window"></div>
            <div class="headlight l"></div>
            <div class="headlight r"></div>
            <div class="tail-light l"></div>
            <div class="tail-light r"></div>
            <div class="car-wheel front"></div>
            <div class="car-wheel rear"></div>
            <div class="sensor-cone" id="sensor-cone"></div>
          </div>
          <span class="car-tag">ACC Vehicle</span>
        </div>

        <div id="dist-label">
          <span id="dist-label-val">0.50 m</span>
        </div>
      </div>
    </section>

    <!-- Content Row: Two-column grid layout. Left column holds the instrument
         panels and user controls; right column holds the serial monitor. -->
    <div id="content-row">

      <!-- Left Column: Contains the LCD display, speedometer, telemetry panel,
           Arduino hardware status, speed/distance controls, mode buttons,
           and the HC-SR04 distance slider. -->
      <div id="left-col">
        <div id="instruments-top">
          <!-- LCD Panel: Simulated 16√ó2 character LCD display.
               Communicates via digital pins D2‚ÄìD7. Shows current mode and speed. -->
          <div class="panel" id="lcd-panel"
            title="Simulated 16√ó2 character LCD display (pins D2-D7). Shows current mode and speed.">
            <div class="panel-head">
              <span class="panel-title">LCD 16√ó2</span>
              <span class="panel-pin" title="Digital pins D7-D2 used for LCD communication">D7 D6 D5 D4 D3 D2</span>
            </div>
            <div id="lcd">
              <div class="lcd-line" id="lcd-1" title="LCD Row 1: Displays the current operating mode label">WELCOME TO
              </div>
              <div class="lcd-line" id="lcd-2" title="LCD Row 2: Displays the current vehicle speed value">ACC PROJECT
              </div>
            </div>
          </div>

          <!-- Speedometer: SVG arc gauge displaying current velocity in km/h.
               The arc fill and color shift based on speed thresholds. -->
          <div class="panel" id="gauge-panel" title="Visual speedometer showing current vehicle velocity in km/h.">
            <div class="panel-head">
              <span class="panel-title">Speedometer</span>
            </div>
            <div id="gauge">
              <svg viewBox="0 0 120 80" id="gauge-svg">
                <path d="M 10 70 A 50 50 0 0 1 110 70" fill="none" stroke="var(--gauge-track)" stroke-width="8"
                  stroke-linecap="round" />
                <path d="M 10 70 A 50 50 0 0 1 110 70" fill="none" stroke="var(--gauge-fill)" stroke-width="8"
                  stroke-linecap="round" id="gauge-arc" stroke-dasharray="157" stroke-dashoffset="157" />
                <text x="60" y="56" text-anchor="middle" class="gauge-num" id="gauge-num" font-family="Play">0</text>
                <text x="60" y="72" text-anchor="middle" class="gauge-unit" font-family="Play">km/h</text>
              </svg>
            </div>
          </div>
        </div>

        <div id="instruments-bottom">
          <!-- Telemetry Panel: Displays real-time operating data including
               active mode, numeric mode code, cruise target, and sensor distance. -->
          <div class="panel" id="info-panel" title="Real-time telemetry showing active mode and sensor data.">
            <div class="panel-head">
              <span class="panel-title">Telemetry</span>
            </div>
            <div id="info-grid">
              <div class="info-cell"
                title="Current ACC operating mode: Normal (manual), Cruise (speed hold), or Adaptive (proximity-aware)">
                <span class="info-label">Mode</span><span class="info-val" id="info-mode">Normal</span>
              </div>
              <div class="info-cell" title="Numeric mode code: 0=Normal, 1=Cruise, 2=Adaptive">
                <span class="info-label">Code</span><span class="info-val mono" id="info-code">0</span>
              </div>
              <div class="info-cell" title="Cruise target speed (km/h).">
                <span class="info-label">Target</span><span class="info-val mono" id="info-target">‚Äî</span>
              </div>
              <div class="info-cell"
                title="Effective distance measured by HC-SR04 ultrasonic sensor. Safety threshold: 0.30m">
                <span class="info-label">Distance</span><span class="info-val mono" id="info-dist">0.50m</span>
              </div>
            </div>
          </div>

          <!-- Arduino Uno Panel: Hardware status display showing LED states
               (Accel, Brake, Trigger, Echo) and analog pin bar indicators (A0‚ÄìA4).
               Reflects the simulated I/O state of the Arduino Uno R3. -->
          <div class="panel" id="hw-panel"
            title="Arduino Uno R3 hardware status. Connected via USB on COM5 at 9600 baud.">
            <div class="panel-head">
              <span class="panel-title">Arduino Uno</span>
              <span class="panel-pin com-on" title="Serial connection active on COM5">‚óè COM5</span>
            </div>
            <div id="hw-grid">
              <div class="led-pair" title="Digital Pin 13: Green LED. Lights up during acceleration.">
                <div class="hw-led green" id="hw-led-g"></div><span>D13 Accel</span>
              </div>
              <div class="led-pair" title="Digital Pin 12: Red LED. Lights up during braking.">
                <div class="hw-led red" id="hw-led-r"></div><span>D12 Brake</span>
              </div>
              <div class="led-pair" title="Digital Pin 10: HC-SR04 Trigger pin.">
                <div class="hw-led cyan" id="hw-led-t"></div><span>D10 Trig</span>
              </div>
              <div class="led-pair" title="Digital Pin 8: HC-SR04 Echo pin.">
                <div class="hw-led cyan" id="hw-led-e"></div><span>D8 Echo</span>
              </div>
            </div>
            <div id="pin-bars">
              <div class="pbar" title="Analog Pin A0: Accelerator potency. Reads 0-5V.">
                <span>A0</span>
                <div class="pbar-fill" id="pf-a0"></div>
              </div>
              <div class="pbar" title="Analog Pin A1: Brake potency. Reads 0-5V.">
                <span>A1</span>
                <div class="pbar-fill" id="pf-a1"></div>
              </div>
              <div class="pbar" title="Analog Pin A2: Cancel button. Resets to Normal Mode.">
                <span>A2</span>
                <div class="pbar-fill" id="pf-a2"></div>
              </div>
              <div class="pbar" title="Analog Pin A3: Cruise Control button. Activates Mode 1.">
                <span>A3</span>
                <div class="pbar-fill" id="pf-a3"></div>
              </div>
              <div class="pbar" title="Analog Pin A4: Adaptive Cruise button. Activates Mode 2.">
                <span>A4</span>
                <div class="pbar-fill" id="pf-a4"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Controls Area: Speed buttons (accelerate/brake), distance buttons
             (closer/farther), mode selection (Normal/Cruise/Adaptive),
             and the HC-SR04 distance slider. Supports mouse, touch, and keyboard. -->
        <div id="controls-area">
          <div id="arrow-grid">
            <div class="arrow-group" title="Speed control: Simulates accelerator (A0) and brake (A1).">
              <span class="arrow-title">Speed</span>
              <div class="arrow-pair">
                <button id="btn-up" class="btn-arrow-key accel" title="Accelerate (‚Üë or W)">‚ñ≤<kbd>W</kbd></button>
                <button id="btn-down" class="btn-arrow-key brake" title="Brake (‚Üì or S)">‚ñº<kbd>S</kbd></button>
              </div>
            </div>
            <div class="arrow-group" title="Distance control: Adjusts the HC-SR04 ultrasonic sensor reading.">
              <span class="arrow-title">Distance</span>
              <div class="arrow-pair">
                <button id="btn-closer" class="btn-arrow-key dist-close"
                  title="Move lead vehicle closer (‚Üê or A)">‚óÄ<kbd>A</kbd></button>
                <button id="btn-farther" class="btn-arrow-key dist-far"
                  title="Move lead vehicle farther (‚Üí or D)">‚ñ∂<kbd>D</kbd></button>
              </div>
            </div>
          </div>

          <div id="mode-row">
            <button id="btn-m0" class="btn btn-mode active" title="Normal Mode (Key: 1)">
              <span class="mode-num">0</span> Normal <kbd>1</kbd>
            </button>
            <button id="btn-m1" class="btn btn-mode" title="Cruise Control (Key: 2)">
              <span class="mode-num">1</span> Cruise <kbd>2</kbd>
            </button>
            <button id="btn-m2" class="btn btn-mode" title="Adaptive Cruise (Key: 3)">
              <span class="mode-num">2</span> Adaptive <kbd>3</kbd>
            </button>
          </div>

          <div id="slider-box"
            title="HC-SR04 ultrasonic distance sensor simulator. Drag to set distance (0.00m to 1.00m).">
            <div class="slider-head">
              <span>HC-SR04 Distance</span>
              <span class="slider-val" id="slider-val">0.50m</span>
            </div>
            <input type="range" id="dist-slider" min="0" max="100" value="50" step="1">
            <div class="slider-labels">
              <span class="lbl-danger">0.00</span>
              <span class="lbl-warn">0.30</span>
              <span class="lbl-safe">1.00</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Serial Monitor: Simulated Arduino serial output (9600 baud).
           Displays timestamped log entries for all ACC state transitions,
           mode changes, and sensor readings. Auto-scrolls to newest entry. -->
      <div id="serial-col" title="Simulated Arduino Serial Monitor (9600 baud).">
        <div class="serial-head">
          <span>Serial Monitor</span>
          <span class="serial-baud">COM5 ¬∑ 9600 baud</span>
        </div>
        <div id="serial" role="log" aria-live="polite"></div>
      </div>

    </div>

  </main>

  <!-- Footer: Copyright notice and author attribution. -->
  <footer id="footer">
    <p>2023 &copy; All Rights Reserved &nbsp;|&nbsp; Designed &amp; Developed by <a
        href="https://github.com/Amey-Thakur" target="_blank" rel="noopener"><strong>Amey Thakur</strong></a></p>
  </footer>

  <script src="simulation.js"></script>
  <script>
    // ‚îÄ‚îÄ‚îÄ PWA SERVICE WORKER REGISTRATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // Registers the sw.js service worker to enable offline capabilities
    // and performance caching for high-speed local loading.
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then((reg) => {
            // Personalized PWA activation log
            console.log('%c‚ö° PWA Engine Active:', 'color: #22c55e; font-weight: 800; font-size: 13px;',
              'Offline support engaged. Designed & Developed by Amey Thakur.');
          })
          .catch(err => console.error('SW registration failed:', err));
      });
    }
  </script>
</body>

</html>